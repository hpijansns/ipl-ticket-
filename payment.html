<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Payment - IPL Tickets</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
body {
  margin: 0;
  padding: 0;
  font-family: 'Roboto', sans-serif;
  background: #f0f0f0;
  color: #000;
}
.container {
  max-width: 800px;
  margin: 30px auto;
  padding: 20px;
}
.payment-box {
  background:#fff;
  border-radius:15px;
  padding:30px;
  box-shadow:0 12px 25px rgba(0,0,0,0.1);
  text-align:center;
  border-top:6px solid #0b81d1;
}
.payment-box h2 {font-size:26px;margin-bottom:15px;color:#000;font-weight:700;}
.match-info {text-align:center;margin-bottom:20px;line-height:1.6;}
.match-info img {max-width:90px;border-radius:10px;margin:5px;}
.total-amount {font-size:20px;font-weight:700;margin:15px 0;}
.qr-container {margin:20px 0;display:inline-block;padding:15px;border:2px dashed #0b81d1;border-radius:15px;background:#f9f9f9;}
.qr-container img {width:200px;height:200px;}
input#utrInput {
  padding:12px;
  font-size:16px;
  width:90%;
  max-width:260px;
  border-radius:8px;
  border:1px solid #ccc;
  margin-top:15px;
  text-align:center;
}
button#payWithUTR {
  padding:14px 25px;
  font-size:16px;
  font-weight:700;
  border:none;
  border-radius:10px;
  cursor:pointer;
  color:#fff;
  background:linear-gradient(90deg,#4caf50,#43a047);
  margin-top:20px;
  transition:0.3s;
}
button#payWithUTR:hover {background:linear-gradient(90deg,#43a047,#388e3c);}
@media(max-width:600px){
  .payment-box {padding:20px;}
  .qr-container img {width:150px;height:150px;}
  .payment-box h2 {font-size:22px;}
}
</style>
</head>
<body>

<div class="container">
<div class="payment-box">
<h2>Scan & Pay</h2>

<div class="match-info" id="matchInfo"></div>

<p class="total-amount" id="totalAmount"></p>

<div class="qr-container">
<img src="https://iili.io/K8pC8WG.png" alt="Scan to Pay QR">
</div>

<p>भुगतान करने के बाद Transaction ID दर्ज करें:</p>
<input type="text" id="utrInput" placeholder="Enter 12-digit UTR">

<br>
<button id="payWithUTR">Pay Now</button>
</div>
</div>

<script>
// Demo data if nothing in localStorage
if(!localStorage.getItem('paymentInfo')){
    localStorage.setItem('paymentInfo', JSON.stringify({
        matchDetails: {
            teams: "Mumbai Indians vs Chennai Super Kings",
            date: "2025-10-25",
            time: "19:30",
            stadium: "Wankhede Stadium",
            img1: "https://iili.io/K8L5Ots.jpg",
            img2: "https://iili.io/K8L5Ots.jpg"
        },
        seatType: "Premium Stand",
        price: 1500,
        qty: 2,
        total: 3000
    }));
}

// Get ticket data
const ticketData = JSON.parse(localStorage.getItem('paymentInfo'));
if(!ticketData){ 
  alert("❌ कोई डेटा नहीं मिला, कृपया फिर से मैच बुक करें।");
  window.location.href="match-details.html";
}

// Show match info
document.getElementById('matchInfo').innerHTML = `
  <strong>${ticketData.matchDetails.teams}</strong><br>
  ${ticketData.matchDetails.date} | ${ticketData.matchDetails.time || '—'}<br>
  ${ticketData.matchDetails.stadium}<br>
  <img src="${ticketData.matchDetails.img1}" alt="Team 1">
  <img src="${ticketData.matchDetails.img2}" alt="Team 2">
  <br><br>
  <strong>Seat Type:</strong> ${ticketData.seatType} <br>
  <strong>Quantity:</strong> ${ticketData.qty}
`;

// Show total amount
document.getElementById('totalAmount').textContent = `Total Amount: ₹${ticketData.total}`;

// Handle payment button
document.getElementById('payWithUTR').addEventListener('click', ()=>{
    const utr = document.getElementById('utrInput').value.trim();
    const utrRegex = /^\d{12}$/;
    const invalidSeqs = ['123456789012','111111111111','000000000000','112233445566'];

    if(!utrRegex.test(utr) || invalidSeqs.includes(utr)){
        alert("❌ कृपया मान्य 12 अंकों का UTR दर्ज करें।");
        return;
    }

    ticketData.utr = utr;
    localStorage.setItem('finalTicket', JSON.stringify(ticketData));

    alert("✅ Payment Successful! Redirecting to Ticket...");
    window.location.href = "ticket.html";
});
</script>

</body>
</html>
